CREATE DEFINER=`root`@`localhost` PROCEDURE `my_procedure_test`(IN search_var VARCHAR(255))
BEGIN
DECLARE exit handler for SQLEXCEPTION
 BEGIN
 
  GET DIAGNOSTICS CONDITION 1 @sqlstate = RETURNED_SQLSTATE, 
   @errno = MYSQL_ERRNO, @text = MESSAGE_TEXT;
  SET @full_error = CONCAT("ERROR ", @errno, " (", @sqlstate, "): ", @text);
  SELECT  @errno, @full_error;
  
    ROLLBACK;

 END;
 
 START TRANSACTION;
 
/* first statement */
 UPDATE `oosc`.`test_table`
SET
`name` = search_var
WHERE `id` = 13;
 
/* second statement */  
UPDATE `oosc`.`test_table`
SET
`id` = 'uuuuuuuuuuu'
WHERE `id` = 13;



COMMIT;


END
